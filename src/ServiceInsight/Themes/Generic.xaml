<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:cnv="clr-namespace:Particular.ServiceInsight.Desktop.ValueConverters"
                    xmlns:controls="clr-namespace:Particular.ServiceInsight.Desktop.Controls"
                    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
                    xmlns:hexViewer="clr-namespace:Particular.ServiceInsight.Desktop.MessageViewers.HexViewer"
                    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
                    mc:Ignorable="d">

    <Style TargetType="{x:Type controls:IconControl}">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type controls:IconControl}">
                    <Path x:Name="PART_Path"
                          Fill="{TemplateBinding Foreground}"
                          Stretch="Fill" />
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <Style TargetType="{x:Type hexViewer:HexControl}">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type hexViewer:HexControl}">
                    <ItemsControl x:Name="PART_LINES"
                                  ScrollViewer.CanContentScroll="True"
                                  VirtualizingStackPanel.IsVirtualizing="True">
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <Grid d:DataContext="{d:DesignInstance hexViewer:HexContentLine}">
                                    <Grid.Resources>
                                        <Style x:Key="HexLineStyle" TargetType="{x:Type TextBlock}">
                                            <Setter Property="Margin" Value="5" />
                                            <Setter Property="FontFamily" Value="{DynamicResource MessageBodyFontFamily}" />
                                            <Setter Property="FontSize" Value="{DynamicResource MessageBodyFontSize}" />
                                            <Setter Property="Foreground" Value="DarkCyan" />
                                        </Style>
                                        <Style x:Key="HexNumberStyle" TargetType="{x:Type TextBlock}">
                                            <Setter Property="Margin" Value="5" />
                                            <Setter Property="FontFamily" Value="{DynamicResource MessageBodyFontFamily}" />
                                            <Setter Property="FontSize" Value="{DynamicResource MessageBodyFontSize}" />
                                            <Setter Property="Foreground" Value="Black" />
                                        </Style>
                                        <Style x:Key="HexCharStyle" TargetType="{x:Type TextBlock}">
                                            <Setter Property="Margin" Value="5" />
                                            <Setter Property="FontFamily" Value="{DynamicResource MessageBodyFontFamily}" />
                                            <Setter Property="FontSize" Value="{DynamicResource MessageBodyFontSize}" />
                                            <Setter Property="Foreground" Value="Gray" />
                                        </Style>
                                        <cnv:ByteToHexConverter x:Key="ByteToHexConverter" />
                                        <cnv:ByteToCharConverter x:Key="ByteToCharConverter" />
                                    </Grid.Resources>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="60" />

                                        <ColumnDefinition Width="32.5" />
                                        <ColumnDefinition Width="32.5" />
                                        <ColumnDefinition Width="32.5" />
                                        <ColumnDefinition Width="32.5" />
                                        <ColumnDefinition Width="32.5" />
                                        <ColumnDefinition Width="32.5" />
                                        <ColumnDefinition Width="32.5" />
                                        <ColumnDefinition Width="32.5" />
                                        <ColumnDefinition Width="32.5" />
                                        <ColumnDefinition Width="32.5" />
                                        <ColumnDefinition Width="32.5" />
                                        <ColumnDefinition Width="32.5" />
                                        <ColumnDefinition Width="32.5" />
                                        <ColumnDefinition Width="32.5" />
                                        <ColumnDefinition Width="32.5" />
                                        <ColumnDefinition Width="32.5" />

                                        <ColumnDefinition Width="20" />
                                        <ColumnDefinition Width="17" />
                                        <ColumnDefinition Width="17" />
                                        <ColumnDefinition Width="17" />
                                        <ColumnDefinition Width="17" />
                                        <ColumnDefinition Width="17" />
                                        <ColumnDefinition Width="17" />
                                        <ColumnDefinition Width="17" />
                                        <ColumnDefinition Width="17" />
                                        <ColumnDefinition Width="17" />
                                        <ColumnDefinition Width="17" />
                                        <ColumnDefinition Width="17" />
                                        <ColumnDefinition Width="17" />
                                        <ColumnDefinition Width="17" />
                                        <ColumnDefinition Width="17" />
                                        <ColumnDefinition Width="17" />
                                        <ColumnDefinition Width="17" />
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto" />
                                    </Grid.RowDefinitions>
                                    <TextBlock Grid.Column="0"
                                               Style="{StaticResource HexLineStyle}"
                                               Text="{Binding Line}" />
                                    <TextBlock Grid.Column="1"
                                               Style="{StaticResource HexNumberStyle}"
                                               Text="{Binding [0],
                                                              Converter={StaticResource ByteToHexConverter}}" />
                                    <TextBlock Grid.Column="2"
                                               Style="{StaticResource HexNumberStyle}"
                                               Text="{Binding [1],
                                                              Converter={StaticResource ByteToHexConverter}}" />
                                    <TextBlock Grid.Column="3"
                                               Style="{StaticResource HexNumberStyle}"
                                               Text="{Binding [2],
                                                              Converter={StaticResource ByteToHexConverter}}" />
                                    <TextBlock Grid.Column="4"
                                               Style="{StaticResource HexNumberStyle}"
                                               Text="{Binding [3],
                                                              Converter={StaticResource ByteToHexConverter}}" />
                                    <TextBlock Grid.Column="5"
                                               Style="{StaticResource HexNumberStyle}"
                                               Text="{Binding [4],
                                                              Converter={StaticResource ByteToHexConverter}}" />
                                    <TextBlock Grid.Column="6"
                                               Style="{StaticResource HexNumberStyle}"
                                               Text="{Binding [5],
                                                              Converter={StaticResource ByteToHexConverter}}" />
                                    <TextBlock Grid.Column="7"
                                               Style="{StaticResource HexNumberStyle}"
                                               Text="{Binding [6],
                                                              Converter={StaticResource ByteToHexConverter}}" />
                                    <TextBlock Grid.Column="8"
                                               Style="{StaticResource HexNumberStyle}"
                                               Text="{Binding [7],
                                                              Converter={StaticResource ByteToHexConverter}}" />
                                    <TextBlock Grid.Column="9"
                                               Style="{StaticResource HexNumberStyle}"
                                               Text="{Binding [8],
                                                              Converter={StaticResource ByteToHexConverter}}" />
                                    <TextBlock Grid.Column="10"
                                               Style="{StaticResource HexNumberStyle}"
                                               Text="{Binding [9],
                                                              Converter={StaticResource ByteToHexConverter}}" />
                                    <TextBlock Grid.Column="11"
                                               Style="{StaticResource HexNumberStyle}"
                                               Text="{Binding [10],
                                                              Converter={StaticResource ByteToHexConverter}}" />
                                    <TextBlock Grid.Column="12"
                                               Style="{StaticResource HexNumberStyle}"
                                               Text="{Binding [11],
                                                              Converter={StaticResource ByteToHexConverter}}" />
                                    <TextBlock Grid.Column="13"
                                               Style="{StaticResource HexNumberStyle}"
                                               Text="{Binding [12],
                                                              Converter={StaticResource ByteToHexConverter}}" />
                                    <TextBlock Grid.Column="14"
                                               Style="{StaticResource HexNumberStyle}"
                                               Text="{Binding [13],
                                                              Converter={StaticResource ByteToHexConverter}}" />
                                    <TextBlock Grid.Column="15"
                                               Style="{StaticResource HexNumberStyle}"
                                               Text="{Binding [14],
                                                              Converter={StaticResource ByteToHexConverter}}" />
                                    <TextBlock Grid.Column="16"
                                               Style="{StaticResource HexNumberStyle}"
                                               Text="{Binding [15],
                                                              Converter={StaticResource ByteToHexConverter}}" />
                                    <TextBlock Grid.Column="18"
                                               Style="{StaticResource HexCharStyle}"
                                               Text="{Binding [0],
                                                              Converter={StaticResource ByteToCharConverter}}" />
                                    <TextBlock Grid.Column="19"
                                               Style="{StaticResource HexCharStyle}"
                                               Text="{Binding [1],
                                                              Converter={StaticResource ByteToCharConverter}}" />
                                    <TextBlock Grid.Column="20"
                                               Style="{StaticResource HexCharStyle}"
                                               Text="{Binding [2],
                                                              Converter={StaticResource ByteToCharConverter}}" />
                                    <TextBlock Grid.Column="21"
                                               Style="{StaticResource HexCharStyle}"
                                               Text="{Binding [3],
                                                              Converter={StaticResource ByteToCharConverter}}" />
                                    <TextBlock Grid.Column="22"
                                               Style="{StaticResource HexCharStyle}"
                                               Text="{Binding [4],
                                                              Converter={StaticResource ByteToCharConverter}}" />
                                    <TextBlock Grid.Column="23"
                                               Style="{StaticResource HexCharStyle}"
                                               Text="{Binding [5],
                                                              Converter={StaticResource ByteToCharConverter}}" />
                                    <TextBlock Grid.Column="24"
                                               Style="{StaticResource HexCharStyle}"
                                               Text="{Binding [6],
                                                              Converter={StaticResource ByteToCharConverter}}" />
                                    <TextBlock Grid.Column="25"
                                               Style="{StaticResource HexCharStyle}"
                                               Text="{Binding [7],
                                                              Converter={StaticResource ByteToCharConverter}}" />
                                    <TextBlock Grid.Column="26"
                                               Style="{StaticResource HexCharStyle}"
                                               Text="{Binding [8],
                                                              Converter={StaticResource ByteToCharConverter}}" />
                                    <TextBlock Grid.Column="27"
                                               Style="{StaticResource HexCharStyle}"
                                               Text="{Binding [9],
                                                              Converter={StaticResource ByteToCharConverter}}" />
                                    <TextBlock Grid.Column="28"
                                               Style="{StaticResource HexCharStyle}"
                                               Text="{Binding [10],
                                                              Converter={StaticResource ByteToCharConverter}}" />
                                    <TextBlock Grid.Column="29"
                                               Style="{StaticResource HexCharStyle}"
                                               Text="{Binding [11],
                                                              Converter={StaticResource ByteToCharConverter}}" />
                                    <TextBlock Grid.Column="30"
                                               Style="{StaticResource HexCharStyle}"
                                               Text="{Binding [12],
                                                              Converter={StaticResource ByteToCharConverter}}" />
                                    <TextBlock Grid.Column="31"
                                               Style="{StaticResource HexCharStyle}"
                                               Text="{Binding [13],
                                                              Converter={StaticResource ByteToCharConverter}}" />
                                    <TextBlock Grid.Column="32"
                                               Style="{StaticResource HexCharStyle}"
                                               Text="{Binding [14],
                                                              Converter={StaticResource ByteToCharConverter}}" />
                                    <TextBlock Grid.Column="33"
                                               Style="{StaticResource HexCharStyle}"
                                               Text="{Binding [15],
                                                              Converter={StaticResource ByteToCharConverter}}" />
                                </Grid>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                        <ItemsControl.ItemsPanel>
                            <ItemsPanelTemplate>
                                <VirtualizingStackPanel VirtualizationMode="Recycling" />
                            </ItemsPanelTemplate>
                        </ItemsControl.ItemsPanel>
                        <ItemsControl.Template>
                            <ControlTemplate>
                                <Border Background="{TemplateBinding Panel.Background}"
                                        BorderBrush="{TemplateBinding Border.BorderBrush}"
                                        BorderThickness="{TemplateBinding Border.BorderThickness}"
                                        Padding="{TemplateBinding Control.Padding}"
                                        SnapsToDevicePixels="True">
                                    <ScrollViewer Focusable="False" Padding="{TemplateBinding Control.Padding}">
                                        <ItemsPresenter SnapsToDevicePixels="{TemplateBinding UIElement.SnapsToDevicePixels}" />
                                    </ScrollViewer>
                                </Border>
                            </ControlTemplate>
                        </ItemsControl.Template>
                    </ItemsControl>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <Style x:Key="HeaderButtonStyle" TargetType="{x:Type Button}">
        <Setter Property="Background" Value="Transparent" />
        <Setter Property="OverridesDefaultStyle" Value="True" />
        <Setter Property="FocusVisualStyle" Value="{x:Null}" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type Button}">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto" MinWidth="14" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>
                        <ContentPresenter Name="PART_IconSite"
                                          Grid.Column="0"
                                          VerticalAlignment="Center"
                                          Content="{Binding Path=Icon,
                                                            RelativeSource={RelativeSource AncestorType={x:Type controls:SplitButton}},
                                                            Mode=TwoWay}"
                                          ContentSource="Icon"
                                          SnapsToDevicePixels="{TemplateBinding UIElement.SnapsToDevicePixels}" />
                        <ContentPresenter Name="PART_ContentSite"
                                          Grid.Column="1"
                                          Margin="{TemplateBinding Control.Padding}"
                                          HorizontalAlignment="{TemplateBinding Control.HorizontalContentAlignment}"
                                          VerticalAlignment="{TemplateBinding Control.VerticalContentAlignment}"
                                          Content="{TemplateBinding ContentControl.Content}"
                                          ContentTemplate="{TemplateBinding ContentControl.ContentTemplate}"
                                          RecognizesAccessKey="True"
                                          SnapsToDevicePixels="{TemplateBinding UIElement.SnapsToDevicePixels}" />
                    </Grid>
                    <ControlTemplate.Triggers>
                        <Trigger SourceName="PART_IconSite" Property="Content" Value="{x:Null}">
                            <Setter TargetName="PART_IconSite" Property="Visibility" Value="Collapsed" />
                            <Setter TargetName="PART_ContentSite" Property="Grid.Column" Value="0" />
                            <Setter TargetName="PART_ContentSite" Property="Grid.ColumnSpan" Value="2" />
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <cnv:ScaledValueConverter x:Key="ScaledValueConverter" />
    <cnv:ThicknessToWidthConverter x:Key="SeparatorConverter" />

    <SolidColorBrush x:Key="Grey40Brush">#666666</SolidColorBrush>
    <SolidColorBrush x:Key="SplitButtonBackground">Transparent</SolidColorBrush>
    <SolidColorBrush x:Key="SplitButtonHoverBackground">#9ACAE7</SolidColorBrush>
    <SolidColorBrush x:Key="IconHoverBackground">#0A66C9</SolidColorBrush>

    <Style x:Key="DummyToggleButton" TargetType="{x:Type ToggleButton}">
        <Setter Property="Background" Value="Transparent" />
        <Setter Property="FocusVisualStyle" Value="{x:Null}" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type ToggleButton}">
                    <Border Background="{TemplateBinding Background}" />
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <Style x:Key="ExpanderStyle" TargetType="{x:Type ToggleButton}">
        <Setter Property="Focusable" Value="False" />
        <Setter Property="IsChecked" Value="False" />
        <Setter Property="ClickMode" Value="Press" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type ToggleButton}">
                        <Path Width="16" Height="16"
                              Data="M256 0c-141.385 0-256 115.398-256 257.75s114.615 257.75 256 257.75 256-115.398 256-257.75-114.615-257.75-256-257.75zM144 336c-44.183 0-80-35.817-80-80s35.817-80 80-80 80 35.817 80 80c0 44.183-35.817 80-80 80zM368 336c-44.184 0-80-35.817-80-80s35.816-80 80-80 80 35.817 80 80c0 44.183-35.816 80-80 80z"
                              Stretch="Uniform"
                              Stroke="{StaticResource IconHoverBackground}"
                              StrokeThickness="1" />
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <Style TargetType="{x:Type controls:SplitButton}">
        <Setter Property="Focusable" Value="True" />
        <Setter Property="FontFamily" Value="{DynamicResource {x:Static SystemFonts.MessageFontFamilyKey}}" />
        <Setter Property="FontSize" Value="{DynamicResource {x:Static SystemFonts.MessageFontSizeKey}}" />
        <Setter Property="FontStyle" Value="{DynamicResource {x:Static SystemFonts.MessageFontStyleKey}}" />
        <Setter Property="FontWeight" Value="{DynamicResource {x:Static SystemFonts.MessageFontWeightKey}}" />
        <Setter Property="MinHeight" Value="{DynamicResource {x:Static SystemParameters.MenuButtonHeightKey}}" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type controls:SplitButton}">
                    <Grid>
                        <Border Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="{TemplateBinding CornerRadius}">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*" />
                                    <ColumnDefinition MinWidth="{TemplateBinding Property=BorderThickness, Converter={StaticResource SeparatorConverter}}" MaxWidth="{TemplateBinding Property=BorderThickness, Converter={StaticResource SeparatorConverter}}" />
                                    <ColumnDefinition MinWidth="{DynamicResource {x:Static SystemParameters.HorizontalScrollBarButtonWidthKey}}" MaxWidth="{DynamicResource {x:Static SystemParameters.HorizontalScrollBarButtonWidthKey}}" />
                                </Grid.ColumnDefinitions>
                                <Button Name="PART_Button"
                                        Grid.Column="0"
                                        Margin="2"
                                        HorizontalAlignment="Center"
                                        VerticalAlignment="Center"
                                        ContentTemplate="{TemplateBinding HeaderTemplate}"
                                        ContentTemplateSelector="{TemplateBinding HeaderTemplateSelector}"
                                        Focusable="False"
                                        SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}"
                                        Style="{StaticResource HeaderButtonStyle}">
                                    <TextBlock Name="PART_Button_Text"
                                               FontWeight="Bold"
                                               Foreground="{StaticResource Grey40Brush}"
                                               Text="{TemplateBinding Header}" />
                                </Button>
                                <ToggleButton Name="PART_DropDownButton"
                                              Grid.Column="2"
                                              Style="{StaticResource ExpanderStyle}"
                                              Visibility="Collapsed" />
                                <ToggleButton Name="PART_DropDownButton_2"
                                              Grid.Column="2"
                                              Focusable="False"
                                              IsChecked="{Binding Path=IsSubmenuOpen,
                                                                  RelativeSource={RelativeSource TemplatedParent},
                                                                  Mode=TwoWay}"
                                              Style="{StaticResource DummyToggleButton}"
                                              Visibility="Collapsed" />
                            </Grid>
                        </Border>
                        <Popup Name="PART_Popup"
                               Width="200"
                               AllowsTransparency="True"
                               Focusable="False"
                               IsOpen="{Binding Path=IsSubmenuOpen,
                                                RelativeSource={RelativeSource TemplatedParent},
                                                Mode=TwoWay}"
                               Placement="Right"
                               PopupAnimation="{DynamicResource {x:Static SystemParameters.ComboBoxPopupAnimationKey}}">
                            <Border Background="{DynamicResource {x:Static SystemColors.MenuBrushKey}}"
                                    BorderBrush="{TemplateBinding BorderBrush}"
                                    BorderThickness="{TemplateBinding BorderThickness}"
                                    CornerRadius="{TemplateBinding CornerRadius}">
                                <ItemsPresenter KeyboardNavigation.DirectionalNavigation="Cycle"
                                                KeyboardNavigation.TabNavigation="Cycle"
                                                SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" />
                            </Border>
                        </Popup>
                    </Grid>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsMouseOver" Value="True">
                            <Setter TargetName="PART_DropDownButton" Property="Visibility" Value="Visible" />
                            <Setter TargetName="PART_DropDownButton_2" Property="Visibility" Value="Visible" />
                            <Setter TargetName="PART_Button_Text" Property="TextDecorations" Value="Underline" />
                            <Setter Property="Background" Value="{StaticResource SplitButtonHoverBackground}" />
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>



</ResourceDictionary>